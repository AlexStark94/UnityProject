# Git Setup for Unity - Fixing Missing Animator and Scene Files

## **The Problem:**
Your animator controllers and scene files aren't being saved when you commit. This is usually because:
1. `.meta` files aren't being tracked (CRITICAL for Unity)
2. Files aren't being staged before commit
3. Unity's version control settings might be wrong

## **Solution:**

### **Step 1: Ensure .meta Files Are Tracked**

Unity **REQUIRES** `.meta` files for every asset. Without them, Unity can't properly reference assets when you switch branches.

**Check your `.gitignore`** - it should NOT exclude `.meta` files. Your current `.gitignore` looks fine, but verify:

```gitignore
# Make sure you DON'T have this line (it would exclude meta files):
# *.meta

# Instead, you should explicitly include meta files:
!*.meta
```

### **Step 2: Add All Unity Files to Git**

Run these commands in your project root:

```bash
# Add all .meta files (CRITICAL!)
git add Assets/**/*.meta
git add ProjectSettings/**/*.meta

# Add animator controllers
git add Assets/**/*.controller
git add Assets/**/*.controller.meta

# Add scene files
git add Assets/**/*.unity
git add Assets/**/*.unity.meta

# Add ScriptableObjects (like your AnimationData)
git add Assets/**/*.asset
git add Assets/**/*.asset.meta

# Add prefabs
git add Assets/**/*.prefab
git add Assets/**/*.prefab.meta

# Add scripts (should already be tracked)
git add Assets/**/*.cs
git add Assets/**/*.cs.meta

# Commit everything
git commit -m "Add Unity assets and meta files"
```

### **Step 3: Verify Unity Version Control Settings**

1. In Unity, go to **Edit > Project Settings > Editor**
2. Check **Version Control Mode**: Should be **"Visible Meta Files"**
3. Check **Asset Serialization**: Should be **"Force Text"** (recommended) or **"Mixed"**

### **Step 4: Update Your .gitignore (Recommended)**

Add this to your `.gitignore` to ensure proper Unity file tracking:

```gitignore
# Unity generated folders
[Ll]ibrary/
[Tt]emp/
[Oo]bj/
[Bb]uild/
[Bb]uilds/
[Ll]ogs/
[Mm]emoryCaptures/

# Rider / VS / VSCode
.vs/
.vscode/
.idea/
*.sln
*.csproj
*.unityproj
*.pidb
*.user
*.userprefs

# OS files
.DS_Store
Thumbs.db

# Crash / Report
sysinfo.txt

# Autogenerated
*.unitypackage

# IMPORTANT: DO NOT ignore .meta files!
# Unity requires .meta files for all assets
# Make sure *.meta is NOT in your .gitignore
```

### **Step 5: Force Add Missing Files**

If files are already ignored, you may need to force add them:

```bash
# Check what's being ignored
git status --ignored

# Force add meta files if they're being ignored
git add -f Assets/**/*.meta
git add -f Assets/**/*.controller
git add -f Assets/**/*.unity
git add -f Assets/**/*.asset

# Commit
git commit -m "Force add Unity assets with meta files"
```

### **Step 6: Verify Files Are Tracked**

After committing, verify:

```bash
# Check if animator is tracked
git ls-files Assets/Animators/

# Check if scenes are tracked
git ls-files Assets/Scenes/

# Check if animation data is tracked
git ls-files Assets/AnimationData/
```

All should show both the file AND its `.meta` file.

## **Why This Happens:**

1. **`.meta` files are essential** - Unity uses them to track asset GUIDs, import settings, and references
2. **Without `.meta` files**, Unity can't find your assets when switching branches
3. **Scene files need their `.meta` files** - otherwise Unity loses references to GameObjects
4. **Animator Controllers need `.meta` files** - otherwise Unity can't link them to GameObjects

## **Quick Fix Command:**

Run this in your project root to add all missing Unity files:

```bash
git add Assets/**/*.meta Assets/**/*.controller Assets/**/*.unity Assets/**/*.asset Assets/**/*.prefab
git commit -m "Add all Unity assets and meta files"
```

## **Prevention:**

Always commit both the asset file AND its `.meta` file together:
- `PlayerAnimatorController.controller` + `PlayerAnimatorController.controller.meta`
- `SampleScene.unity` + `SampleScene.unity.meta`
- `SkinnyGreenSoldier_AnimationData.asset` + `SkinnyGreenSoldier_AnimationData.asset.meta`

Never commit one without the other!

